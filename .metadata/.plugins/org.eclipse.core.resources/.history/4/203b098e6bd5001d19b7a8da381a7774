/*
 * GPIO.c
 *
 *  Created on: 6 abr 2023
 *      Author: mgnar
 */
#include "GPIO.h"
//#include "stm32f1xx_hal.h"

// Peripheral pins.
GPIO_InitTypeDef SPI =
{ 0 }, USART2 =
{ 0 };
// Individual pins.
GPIO_InitTypeDef IRQ =
{ 0 }, PPS =
{ 0 }, CE =
{ 0 }, STATUS =
{ 0 }, VBAT =
{ 0 };

void GPIOInit(void)
{
	// Clock net is enabled for ports A and B.
	__HAL_RCC_GPIOA_CLK_ENABLE();
	__HAL_RCC_GPIOB_CLK_ENABLE();

	// SPI pins configuration.
	SPI.Pin = GPIO_PIN_4 | GPIO_PIN_5 | GPIO_PIN_6 | GPIO_PIN_7;
	SPI.Mode = GPIO_MODE_AF_PP;
	//ToDo
	//SPI.Alternate = GPIO_AF5_SPI1;
	// Init in the selected port with the above config.
	HAL_GPIO_Init(GPIOA, &SPI);

	// UART pins configuration.
	USART2.Pin = GPIO_PIN_2 | GPIO_PIN_3;
	USART2.Mode = GPIO_MODE_AF_PP;
	//ToDo
	//SPI.Alternate = GPIO_AF5_SPI1;
	// Init in the selected port with the above config.
	HAL_GPIO_Init(GPIOA, &USART2);

	// IRQ pin configuration.
	IRQ.Pin = GPIO_PIN_0;
	IRQ.Mode = GPIO_MODE_INPUT;
	HAL_GPIO_Init(GPIOB, &IRQ);
}
